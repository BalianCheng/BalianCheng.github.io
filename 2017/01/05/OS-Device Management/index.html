<!DOCTYPE html>
<html lang="zh-Hans">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="Balian Cheng" />



<meta name="description" content="介绍I/O设备的管理">
<meta property="og:type" content="article">
<meta property="og:title" content="操作系统:设备管理">
<meta property="og:url" content="http://www.codingbalian.online/2017/01/05/OS-Device Management/index.html">
<meta property="og:site_name" content="Balian's Blog">
<meta property="og:description" content="介绍I/O设备的管理">
<meta property="og:updated_time" content="2017-01-06T08:17:17.426Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="操作系统:设备管理">
<meta name="twitter:description" content="介绍I/O设备的管理">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="Balian&#39;s Blog" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>操作系统:设备管理 | Balian&#39;s Blog</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script>
        yiliaConfig.jquery_ui = [true, "//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js", "//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css"];
    </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="https://avatars0.githubusercontent.com/u/17884783?v=3&amp;s=460" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Balian Cheng</a></h1>
        </hgroup>

        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="false" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:393418737@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="https://github.com/BalianCheng" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DOM/">DOM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DTD/">DTD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JAXP/">JAXP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Schema/">Schema</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Servlet/">Servlet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XSL/">XSL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jQuery/">jQuery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/处理机/">处理机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/存储管理/">存储管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文件管理/">文件管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/死锁/">死锁</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设备管理/">设备管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/调度/">调度</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/进程/">进程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/进程管理/">进程管理</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://www.Studaholic.online/">Studaholic</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">前端新人</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Balian Cheng</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="https://avatars0.githubusercontent.com/u/17884783?v=3&amp;s=460" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Balian Cheng</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:393418737@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/BalianCheng" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap"><article id="post-OS-Device Management" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/01/05/OS-Device Management/" class="article-date">
      <time datetime="2017-01-05T09:15:14.000Z" itemprop="datePublished">2017-01-05</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      操作系统:设备管理
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/操作系统/">操作系统</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设备管理/">设备管理</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>介绍I/O设备的管理<br><a id="more"></a></p>
<h2 id="1">I/O概述</h2>

<ol>
<li>I/O性能经常成为系统性能的瓶颈</li>
<li>操作系统庞大复杂的原因之一是：资源多、杂，并发，均来自I/O</li>
<li>理解I/O的工作过程与结构是理解操作系统的工作过程与结构的关键</li>
<li>与其他功能联系密切，特别是文件系统</li>
</ol>
<p>对于不同规模的计算机系统，其I/O系统的结构也有所差异。通常分为两类：</p>
<ul>
<li>微型机I/O系统<ul>
<li>多采用总线I/O系统结构。</li>
<li>CPU通过设备控制器与I/O设备通信。</li>
<li>不同的设备配置相应的控制器。</li>
</ul>
</li>
<li>主机I/O系统<ul>
<li>增加一级I/O通道，用以代替CPU与各设备控制器通信。</li>
<li>四级结构。</li>
</ul>
</li>
</ul>
<h3 id="1.1">设备分类</h3>

<ul>
<li>按使用特性分<ul>
<li>存储型设备</li>
<li>输入型设备（外设→主机）</li>
<li>输出型设备（主机→外设）</li>
<li>输入输出型设备（交互型设备）</li>
</ul>
</li>
<li>按信息交换单位分<ul>
<li>块设备：用于存储信息。基本特征是其传输速率较高，可寻址，可随机地读/写</li>
<li>字符设备：以字符为单位存储、传输信息；传输速率较低；不可寻址</li>
</ul>
</li>
<li>按外部设备的从属关系分<ul>
<li>系统设备：操作系统生成时，登记在系统中的标准设备</li>
<li>用户设备：系统生成时，未登记在系统中的非标准设备。对于这类设备的处理程序由用户提供，并将其纳入系统，由系统代替用户实施管理。</li>
</ul>
</li>
<li>虚设备<ul>
<li>在一类设备上模拟另一类设备，常用共享设备模拟独占设备，用高速设备模拟低速设备，被模拟的设备称为虚设备</li>
<li>将慢速的独占设备改造成多个用户可共享的设备，提高设备的利用率</li>
</ul>
</li>
</ul>
<blockquote>
<p>SPOOLing技术<br>为解决独立设备数量少，速度慢，不能满足众多进程的要求，而且在进程独占设备期间，设备利用率比较低而提出的一种设备管理技术</p>
</blockquote>
<ul>
<li>从程序使用角度分<ul>
<li>逻辑设备</li>
<li>物理设备</li>
</ul>
</li>
<li>按数据传输率分<ul>
<li>第一类是低速设备，这是指其传输速率仅为每秒钟几个字节至数百个字节的一类设备。典型设备有键盘、鼠标、语音的输入和输出等设备。</li>
<li>第二类是中速设备，这是指其传输速率在每秒钟数千个字节至数万个字节的一类设备。典型设备有行式打印机、激光打印机等。</li>
<li>第三类是高速设备， 这是指其传输速率在数百千个字节至数十兆字节的一类设备。 典型设备有磁带机、 磁盘机、 光盘机等。 </li>
</ul>
</li>
</ul>
<h3 id="1.2">I/O请求处理</h3>

<p>I/O请求过程：用户进程→独立于设备的软件→设备驱动程序→中断处理程序→硬件</p>
<ol>
<li>用户进程层执行输入输出系统调用，对I／O数据进行格式化，为假脱机输入／输出作准备</li>
<li>独立于设备的软件实现设备的命名、设备的保护、成块处理、缓冲技术和设备分配</li>
<li>设备驱动程序设置设备寄存器、检查设备的执行状态</li>
<li>中断处理程序负责I／O完成时，唤醒设备驱动程序进程，进行中断处理</li>
<li>硬件层实现物理I／O的操作</li>
</ol>
<h3 id="1.3">中断处理程序</h3>

<ol>
<li>每个进程在启动一个I／O操作后阻塞 </li>
<li>直到I／O操作完成并产生一个中断</li>
<li>由操作系统接管CPU后唤醒该进程为止</li>
</ol>
<h3 id="1.4">设备驱动程序</h3>

<ul>
<li>与设备密切相关的代码放在设备驱动程序中，每个设备驱动程序处理一种设备类型</li>
<li>每一个控制器都设有一个或多个设备寄存器，用来存放向设备发送的命令和参数。设备驱动程序负责释放这些命令，并监督它们正确执行</li>
<li>设备驱动程序的任务是接收来自与设备无关的上层软件的抽象请求，并执行这个请求</li>
</ul>
<h3 id="1.5">设备独立的软件</h3>

<p>虽然I／O软件中一部分是设备专用的，但大部分软件是与设备无关的。设备驱动程序与设备独立软件之间的确切界限是依赖于具体系统的。<br>独立于设备的软件的基本任务是实现所有设备都需要的功能，并且向用户级软件提供一个统一的接口。</p>
<h3 id="1.6">用户空间的I／O软件</h3>

<p>有一小部分I/O软件是由与用户程序连接在一起的库过程，甚至完全由运行于核外的程序构成。系统调用，包括I／O系统调用，通常由库过程实现。<br>这些过程所做的工作只是将系统调用时所用的参数放在合适的位置。</p>
<h2 id="2">I/O硬件特点</h2>

<h3 id="2.1">I/O设备组成</h3>

<ul>
<li>物理设备:设备本身</li>
<li>设备控制器:完成设备与主机间的连接和通讯</li>
</ul>
<h3 id="2.2">I/O过程</h3>

<ol>
<li>准备</li>
<li>启动</li>
<li>测试和等待</li>
<li>结果检查和错误处理</li>
<li>通过对设备接口寄存器组的读写完成</li>
</ol>
<ul>
<li>操作系统将命令写入控制器寄存器中，以实现输入／输出</li>
<li>当控制器接受一条命令后，可独立于CPU完成指定操作，CPU可以转去执行其它运算</li>
<li>命令完成时，控制器产生一个中断，CPU响应中断，控制转给操作系统。CPU通过读控制器寄存器中的信息，获得操作结果和设备状态</li>
<li>控制器与设备之间的接口常常是一个低级接口</li>
<li>控制器的任务是把串行的位流转换为字节块，并进行必要的错误修正。首先，控制器按位进行组装，然后存入控制器内部的缓冲区中形成以字节为单位的块。在对块验证检查和并证明无错误时，再将它复制到主存中</li>
</ul>
<h2 id="3">I/O控制技术</h2>

<ul>
<li>程序控制</li>
<li>中断驱动</li>
<li>直接存储器存取（DMA）</li>
<li>通道</li>
</ul>
<p>目的：减少CPU对I/O控制的干预，提高CPU与I/O设备的并行度</p>
<h3 id="3.1">程序控制I/O技术</h3>

<p>又称忙－等待方式。<br>由处理器提供I/O相关指令来实现:</p>
<ul>
<li>I/O处理单元处理请求并设置I/O状态寄存器相关位</li>
<li>处理器定期轮询I/O单元的状态，直到处理完毕</li>
</ul>
<p>主要缺陷：</p>
<ul>
<li>处理器必须不断关注I/O处理单元的状态，因而耗费大量时间轮询信息，严重地降低了系统性能</li>
<li>在程序I/O方式中，由于CPU的高速性和I/O设备的低速性， 致使CPU的绝大部分时间都处于等待I/O设备完成数据I/O的循环测试中， 造成对CPU的极大浪费</li>
</ul>
<h3 id="3.2">中断驱动I/O技术</h3>

<p>将处理器从轮询任务中解放出来，使I/O操作和指令执行并行起来。<br>当某进程要启动某个I/O设备时，便由CPU向相应的设备控制器发出一条命令，然后立即返回继续执行原来的任务。设备控制器按照该命令控制I/O设备。此时，CPU和I/O设备并行工作。</p>
<h3 id="3.3">DMA技术</h3>

<p>当处理器和I/O间传送数据时，每完成一个字节，控制器便向CPU请求一次中断效率太低。为此，数据可以成块传送,通过系统总线中一独立控制单元——DMA控制器，完成直接存储器访问（DMA：Direct Memory Access）。</p>
<p>DMA方式的特点：</p>
<ol>
<li>数据传输的基本单位是数据块，即在CPU与I/O设备之间，每次传送至少一个数据块；</li>
<li>所传送的数据是从设备直接送入内存的，或者相反； </li>
<li>仅在传送一个或多个数据块的开始和结束时，才需CPU干预，整块数据的传送是在控制器的控制下完成的。</li>
</ol>
<p>可见，DMA方式较之中断驱动方式，又是成百倍地减少了CPU对I/O的干预，进一步提高了CPU与I/O设备的并行操作程度。 </p>
<p>DMA控制器：</p>
<ul>
<li>命令/状态寄存器CR：用于接收从CPU发来的I/O命令或有关控制信息， 或设备的状态。</li>
<li>内存地址寄存器MAR：在输入时，它存放把数据从设备传送到内存的起始目标地址；在输出时，它存放由内存到设备的内存源地址。</li>
<li>数据寄存器DR：用于暂存从设备到内存，或从内存到设备的数据。</li>
<li>数据计数器DC：存放本次CPU要读或写的一个字(节)</li>
</ul>
<h3 id="3.4">通道</h3>

<p>I/O通道方式是DMA方式的发展，它可进一步减少CPU的干预，即把对一个数据块的读(或写)为单位的干预，减少为对一组数据块的读(或写)及有关的控制和管理为单位的干预。 同时，又可实现CPU、通道和I/O设备三者的并行操作，从而更有效地提高整个系统的资源利用率。</p>
<h2 id="4">设备有关技术</h2>

<h3 id="4.1">Spooling（虚拟设备）技术</h3>

<p>为了缓和CPU的高速性与I/O设备低速性间的矛盾而引入了脱机输入、脱机输出技术。该技术是利用专门的外围控制机， 将低速I/O设备上的数据传送到高速磁盘上。<br>在多道系统中，完全可以利用其中的一道程序，来模拟脱机输入时的外围控制机功能，把低速I/O设备上的数据传送到高速磁盘上；再用另一道程序来模拟脱机输出时外围控制机的功能，把数据从磁盘传送到低速输出设备上。这样，便可在主机的直接控制下，实现脱机输入、输出功能。此时的外围操作与CPU对数据的处理同时进行，我们把这种在联机情况下实现的同时外围操作称为SPOOLing(Simultaneaus Periphernal Operating On-Line)，或称为假脱机操作。</p>
<p>特点：</p>
<ul>
<li>提高了I/O的速度。 </li>
<li>将独占设备改造为共享设备。 </li>
<li>实现了虚拟设备功能。 </li>
</ul>
<h3 id="4.2">中断技术</h3>

<p>中断的概念：<br>CPU对系统发生的某个事件作出的一种反应<br>CPU暂停正在执行的程序，保留现场后自动转去执行相应事件的处理程序，处理完成后返回断点，继续执行被打断的程序<br>特点：</p>
<ol>
<li>中断随机的</li>
<li>中断是可恢复的</li>
<li>中断是自动处理的</li>
</ol>
<p>引入中断的目的:<br>解决主机与外设的并行工作问题<br>提高可靠性<br>实现多机联系<br>实现实时控制</p>
<p>强迫性中断:正在运行的程序所不期望的，由于某种硬件故障或外部请求引起的</p>
<ul>
<li>输入/输出(I/O)中断：主要来自外部设备通道</li>
<li>程序性中断：运行程序中本身的中断(如溢出,缺页中断,缺段中断,地址越界)</li>
<li>时钟中断</li>
<li>控制台中断</li>
<li>硬件故障</li>
</ul>
<p>自愿性中断：用户在程序中有意识安排的中断，是由于用户在编制程序时因为要求操作系统提供服务，有意使用“访管”指令或系统调用，使中断发生</p>
<ul>
<li>执行I/O</li>
<li>创建进程</li>
<li>分配内存</li>
<li>信号量操作</li>
<li>发送/接收消息</li>
</ul>
<p>微机中的中断：</p>
<ol>
<li>可屏蔽中断（I/O中断）</li>
<li>不可屏蔽中断（机器内部故障、掉电中断）</li>
<li>程序错误中断（溢出、除法错等中断）</li>
<li>软件中断（Trap指令或中断指令INT）</li>
</ol>
<p>中断寄存器：</p>
<ul>
<li>有的计算机中，为了区分和不丢失中断信号，对应每个中断源分别用一固定触发器寄存中断信号规定值为1时，表示有中断信号，为0时表示无</li>
<li>这些触发器的全体称为中断寄存器</li>
<li>每个触发器称为一个中断位</li>
<li>所有中断寄存器是由若干个中断位组成</li>
</ul>
<p>中断优先级：</p>
<ul>
<li>以机器故障中断的优先级最高 </li>
<li>程序中断和访问管理程序中断次之</li>
<li>外部中断更次之 </li>
<li>输入输出的优先级最低</li>
</ul>
<p>中断屏蔽：<br>在CPU上运行的程序，有时由于种种原因，不希望其在执行过程中被别的事件所中断，称为中断屏蔽。<br>在PSW中设置中断屏蔽码以屏蔽某些指定的中断类型，各设备接口中也有中断禁止位，以禁止该设备的中断。</p>
<p>实时处理的中断：<br>把具有重要意义传感器发出的中断作为高优先级，中断优先级的设计是灵活可变的，允许用户根据应用需要，选择不同中断优先策略。</p>
<p>中断处理：</p>
<ol>
<li>设备给处理器发一个中断信号</li>
<li>处理器处理完当前指令后响应中断，延迟非常短</li>
<li>处理器处理完当前指令后检测到中断，判断出中断来源并向发送中断的设备发送了确认中断信号，确认信号使得该设备将中断信号恢复到一般状态</li>
<li>处理器开始为软件处理中断做准备：保存中断点的程序执行上下文环境，这通常包括程 序状态字PSW，程序计数器PC中的下一条指令位置，一些寄存器的值，它们通常保存在系统控制栈中,处理器状态被切换到管态</li>
<li>处理器根据中断源查询中断向量表，获得与该中断相联系的处理程序入口地址，并将PC置成该地址，处理器开始一个新的指令周期，控制转移到中断处理程序</li>
<li>中断处理程序开始工作，包括检查I/O相关的状态信息，操纵I/O设备或者在设备和主存之间传送数据</li>
<li>中断处理结束时，处理器检测到中断返回指令，被中断程序的上下文环境从系统堆栈中被恢复，处理器状态恢复成原来的状态</li>
<li>PSW和PC被恢复成中断前的值，处理器开始一个新的指令周期，中断处理结束</li>
</ol>
<p>多个中断（中断处理过程中又发生中断，引起多中断处理问题）的处理：<br>第一种：处理一个中断时禁止中断，对任何新中断置之不理，在这期间发生的中断将保持挂起状态；当再次允许中断时，新中断信号被处理器检测到<br>软件实现方法：</p>
<ul>
<li>在任何中断处理前使用禁止中断指令</li>
<li>在处理结束后开放中断指令</li>
<li>所有中断严格按照发生顺序处理</li>
<li>不考虑中断紧急程度，无法达到较严格时间要求</li>
</ul>
<p>第二种：</p>
<ul>
<li>中断按照优先度分级</li>
<li>允许优先级高中断打断优先级低的中断处理过程，这样中断优先级技术将引起中断处理的嵌套</li>
<li>只要合适地定义中断的优先级别，方法一的弊端大都可以克服</li>
</ul>
<h3 id="4.3">典型的中断处理</h3>

<ol>
<li><p>I/O中断:由I/O设备的控制器或者通道发出</p>
<ul>
<li>I/O操作正常结束:如果要继续I/O操作，需要在准备好以后重新启动I/O，若请求I/O程序正处于等待I/O状态，则应将其唤醒</li>
<li>I/O异常:需要重新执行失败的I/O操作,重试次数有上限，次数过大，系统将判定硬件故障</li>
</ul>
</li>
<li><p>时钟中断:中断处理程序通常做与系统运转、管理和维护相关的工作</p>
<ul>
<li>维护软件时钟：系统有若干个软件时钟，控制定时任务以及进程的处理器时间配额，时钟中断需要维护、定时更新这些软件时钟</li>
<li>处理器时间调度：维护当前进程时间片软件时钟，并在当前进程时间片到时以后运行调度程序选择下一个被调度的进程</li>
<li>控制系统定时任务：通过软件时钟和调度程序定时激活一些系统任务，如监测死锁、系统记帐、系统审计等</li>
<li>实时处理</li>
</ul>
</li>
<li><p>硬件故障中断</p>
<ul>
<li>保存现场，使用一定警告手段，提供些辅助诊断信息</li>
<li>在高可靠系统中，中断处理程序还要评估系统可用性，尽可能恢复系统</li>
</ul>
</li>
<li><p>程序性中断:程序指令出错、指令越权或者指令寻址越界而引发两类处理方法</p>
<ul>
<li>只能由操作系统的相关扩展功能模块完成,多为程序试图作不能做的操作引起的系统保护</li>
<li>可由程序自己完成</li>
<li>系统调试中断（断点中断、单步跟踪）也可被用户程序处理，用以支持各种程序调试</li>
</ul>
</li>
<li><p>系统服务请求（自愿性中断）:系统服务请求由处理器专用指令（访管指令）激发</p>
<ul>
<li>执行专用指令的结果是系统被切换到管态，并且转移到一段专门OS程序处开始执行</li>
<li>指令格式通常是指令名加请求服务识别号（中断号）</li>
<li>OS利用处理器提供的这种接口建立系统服务体系</li>
<li>处理器一般不负责定义系统调用所传递的参数格式</li>
</ul>
</li>
</ol>
<h3 id="4.4">通道技术</h3>

<p>通道又称输入输出处理机，通道是一个比CPU功能较弱、速度较慢、价格较为便宜的处理机，但“通道”一词在微型机中常指与DMA或与I/O处理机相连设备的单纯的数据传送通路，它并不具有处理机的功能。</p>
<p>引入通道的目的：提高CPU与设备，设备与设备之间的并行工作能力<br>通道类型：</p>
<ul>
<li>字节多路通道:通常按字节交叉的方式工作，适用于低速I/O设备。</li>
<li>数据选择通道:按成组方式进行数据传输，适用于高速I/O设备。</li>
<li>数组多路通道:综合前二个优点（数据传送率和通道利用率都较高）。</li>
</ul>
<p>通道工作原理:包含通道指令（空操作，读操作，写操作，控制，转移操作），并可执行用这些指令编写的通道程序<br>通道运算控制部件:</p>
<ul>
<li>通道地址字CAW：记录通道程序在内存中的地址</li>
<li>通道命令字CCW：保存正在执行的通道指令</li>
<li>通道状态字CSW：存放通道执行后的返回结果</li>
<li>通道数据字CDW：存放传输数据通道和CPU共用内存，通过周期窃取方式取得</li>
</ul>
<p>通道命令：用于I/O操作的命令主要有：</p>
<ol>
<li>I/O指令：启动通道程序</li>
<li>通道命令：对I/O操作进行控制：读、反读、写、测试设备状态的数据传输命令、用于设备控制的命令（磁带反绕、换页）、实现通道程序内部控制的转移命令</li>
</ol>
<p>工作原理：</p>
<ul>
<li>CPU：执行用户程序，当遇到I/O请求时，可根据该请求生成通道程序放入内存（也可事先编好放入内存），并将该通道程序的首地址放入CAW中；之后执行“启动I/O”指令，启动通道工作。</li>
<li>通道：接收到“启动I/O”指令后，从CAW中取出通道程序的首地址，并根据首地址取出第一条指令放入CCW中，同时向CPU发回答信号，使CPU可继续执行其他程序，而通道则开始执行通道程序，完成传输工作。</li>
</ul>
<p>通道与CPU的关系：</p>
<ul>
<li>主从关系</li>
<li>可并行工作</li>
<li>有通信方式</li>
<li>作用不同</li>
</ul>
<h3 id="4.5">DMA技术</h3>

<p>DMA 方式与中断的主要区别：<br>中断方式是在数据缓冲寄存区满后，发中断请求，CPU进行中断处理<br>DMA方式则是在所要求传送的数据块全部传送结束时要求CPU进行中断处理，大大减少了CPU进行中断处理的次数<br>中断方式的数据传送是由CPU控制完成的<br>而DMA方式则是在DMA控制器的控制下不经过CPU控制完成的</p>
<p>DMA工作示例</p>
<ol>
<li>CPU提供被读取块磁盘地址；目标存储地址；待读取字节数</li>
<li>整块数据读进缓冲区，核准校验</li>
<li>控制器按照指定存储器地址，把第一个字节送入主存，按指定字节数进行数据传送</li>
<li>每当传送一个字节后，字节计数器值减1，直到字节计数器等于0</li>
<li>控制器引发中断，通知操作系统，操作完成</li>
</ol>
<p>DMA工作原理：</p>
<ul>
<li>存放输入数据的内存起始地址、要传送的字节数送入DMA控制器的内存地址寄存器和传送字节计数器，中断允许位和启动位置成1，启动设备</li>
<li>发出传输要求的进程进入等待状态</li>
<li>执行指令被暂时挂起，进程调度其他进程占据CPU</li>
<li>输入设备不断窃取CPU工作周期，数据不断写入内存</li>
<li>传送完毕，发出中断信号</li>
<li>CPU接到中断信号转入中断处理程序处理</li>
<li>中断处理结束，CPU返回原进程或切换到新的进程</li>
</ul>
<h3 id="4.6">缓冲技术</h3>

<p>缓冲区是有一定容量、暂存信息的存贮装置。凡是数据到达和离去速度不匹配的地方均可使用缓冲区。在操作系统中采用缓冲是为了实现数据的I/O操作，以缓解CPU与外部设备之间速度不匹配的矛盾，提高资源利用率。</p>
<p>引入缓冲区的优点：</p>
<ul>
<li>提高硬件的并行操作能力</li>
<li>减少了I/O设备对处理器的中断请求次数</li>
<li>简化了中断机制</li>
<li>节省了系统开销</li>
</ul>
<p>缺点：</p>
<ul>
<li>在系统区要设置相当大的缓冲池才能满足所有的Ｉ／Ｏ请求</li>
<li>从系统缓冲区传送数据到调用进程缓冲区要花费额外的时间，增加了系统的总开销</li>
</ul>
<p>缓冲区设置：</p>
<ul>
<li>硬缓冲：设备中设置</li>
<li>软缓冲：内存中使用一定的空间作为缓冲区</li>
</ul>
<p>缓冲技术：</p>
<ol>
<li>单缓冲：只设置一个缓冲区，效率低</li>
<li>双缓冲：设置两个缓冲区，交替使用，但不适用于速度差距大的交流</li>
<li>循环缓冲：多个缓冲按顺序构成环形，先进先出队列的形式，设头尾、指针指向同一个缓冲区。头、尾指针读写时不能相互超越</li>
<li>缓冲池：为多个设备共享，设备需要时才接上，用完归还<ul>
<li>空(闲)缓冲区：链成队列空缓冲队列emq</li>
<li>装满输入数据的缓冲区：链成队列输入队列inq</li>
<li>装满输出数据的缓冲区：链成队列输出队列outq</li>
<li>收容输入数据的工作缓冲区</li>
<li>提取输入数据的工作缓冲区</li>
<li>收容输出数据的工作缓冲区</li>
<li>提取输出数据的工作缓冲区</li>
</ul>
</li>
</ol>
<h3 id="4.7">总线与USB技术</h3>

<p>在计算机系统内各种子系统间构建公用的信号或数据传输通道，这种可共享连接的传输通道称为总线。<br>I/O总线分为数据总线、地址总线、控制总线。<br>USB（Universal Serial Bus）通用串行总线，是一种连接I/O串行设备的技术标准。</p>
<p>USB的结构：</p>
<ul>
<li>控制器：控制器主要负责执行由控制器驱动程序发出的命令</li>
<li>控制器驱动程序：控制器驱动程序在控制器与USB设备之间建立通信信道</li>
<li>USB芯片驱动程序：USB芯片驱动程序提供了对USB的支持</li>
</ul>
<p>USB的传输方式：</p>
<ul>
<li>等时传输方式：以固定的传输速率，连续不断传输数据，发生错误时，USB不处理，而是继续传送新的数据。</li>
<li>中断传输方式：该方式传送的数据量很小，但这些数据需要及时处理</li>
<li>控制传输方式：处理主机的USB设备的数据传输，包括设备控制指令、设备状态查询及确认命令，先进先出原则</li>
<li>批传输方式：用来传输要求正确无误的数据</li>
</ul>
<h2 id="5">设备分配与设备处理</h2>

<h3 id="5.1">设备分配与回收</h3>

<p>当某进程向系统提出I/O请求时，设备分配程序按一定策略分配设备、控制器和通道，形成一条数据传输通路，以供主机和设备间信息交换。</p>
<p>设备管理程序对I/O设备进行分配和控制是借助于一些表格；表格中记录了对I/O设备控制所需之信息。它们是设备管理程序实现管理功能的数据结构。</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>设备控制表（DCT）</td>
<td>每个设备一个</td>
</tr>
<tr>
<td>控制器表（COCT）</td>
<td>每个控制器一个</td>
</tr>
<tr>
<td>通道表（CMCT）</td>
<td>每个通道一个</td>
</tr>
<tr>
<td>系统设备表（SDT）</td>
<td>整个系统一个</td>
</tr>
</tbody>
</table>
<h3 id="5.2">设备分配策略</h3>

<p>独占设备的分配:要考虑充分发挥效率，避免由于不合理的分配策略造成死锁。</p>
<ul>
<li>静态分配：在进程运行前, 完成设备分配；运行结束时，收回设备,设备利用率低</li>
<li>动态分配：在进程运行过程中，当用户提出设备要求时，进行分配，一旦停止使用立即收回,效率高，但分配策略不好时, 产生死锁</li>
</ul>
<p>共享设备分配：考虑多个访问请求到达时服务的顺序，使平均服务时间越短越好。</p>
<p>I/O设备的分配算法：先请求先服务；优先权最高者优先</p>
<p>与设备无关性：逻辑设备与物理设备区分使用联系逻辑设备名称和物理设备名称的映射表(LUT)</p>
<p>设备分配程序:根据用户请求的I/O设备的逻辑名，查找逻辑设备和物理设备的映射表；以物理设备为索引，查找SDT，找到该设备所连接的DCT；继续查找与该设备连接的COCT和CHCT，就找到了一条通路。即：分配设备 －&gt;分配控制器-&gt;分配通道</p>
<h3 id="5.3">设备处理</h3>

<p>设备处理程序通常又称为设备驱动程序，它是I/O进程与设备控制器之间的通信程序。</p>
<p>设备处理方式：</p>
<ul>
<li>为每一类设备设置一个进程，专门用于执行这类设备的I/O操作</li>
<li>在整个系统中设置一个I/O进程，专门用于执行系统中所有各类设备的I/O操作</li>
<li>不设置专门的设备处理进程，而只为各类设备设置相应的设备处理程序(模块)，供用户进程或系统进程调用</li>
</ul>
<p>设备驱动程序的功能：</p>
<ol>
<li>接收由I/O进程发来的命令和参数，并将命令中的抽象要求转换为具体要求</li>
<li>检查用户I/O请求的合法性，了解I/O设备的状态，传递有关参数，设置设备的工作方式</li>
<li>发出I/O命令，如果设备空闲，便立即启动I/O设备去完成指定的I/O操作；如果设备处于忙碌状态，则将请求者的请求块挂在设备队列上等待</li>
<li>及时响应由控制器或通道发来的中断请求，并根据其中断类型调用相应的中断处理程序进行处理</li>
<li>对于设置有通道的计算机系统，驱动程序还应能够根据用户的I/O请求，自动地构成通道程序</li>
</ol>
<p>设备驱动程序的特点:</p>
<ol>
<li>驱动程序主要是指在请求I/O的进程与设备控制器之间的一个通信和转换程序</li>
<li>驱动程序与设备控制器和I/O设备的硬件特性紧密相关，因而对不同类型的设备应配置不同的驱动程序。 </li>
<li>驱动程序与I/O设备所采用的I/O控制方式紧密相关。 </li>
<li>由于驱动程序与硬件紧密相关，因而其中的一部分必须用汇编语言书写。 </li>
</ol>
<p>设备驱动程序的处理过程:</p>
<ol>
<li>将抽象要求转换为具体要求 </li>
<li>检查I/O请求的合法性</li>
<li>读出和检查设备的状态 </li>
<li>传送必要的参数 </li>
<li>工作方式的设置 </li>
<li>启动I/O设备 </li>
</ol>
<h2 id="6">磁盘存储器管理</h2>

<p>磁盘存储器管理的目的：</p>
<ul>
<li>为文件分配存储空间</li>
<li>合理地组织文件地存储方式，以提高访问速度</li>
<li>提高磁盘存储空间地利用率</li>
<li>提高磁盘I/O速度，改善文件性能</li>
<li>确保文件系统的可靠性（备份）</li>
</ul>
<p>磁盘高速缓存的形式 ：</p>
<ol>
<li>在内存中开辟一个单独的存储空间来作为磁盘高速缓存，其大小是固定的，不会受应用程序多少的影响</li>
<li>把所有未利用的内存空间变为一个缓冲池，供请求分页系统和磁盘I/O时(作为磁盘高速缓存)共享。此时高速缓存的大小，显然不再是固定的。当磁盘I/O的频繁程度较高时，该缓冲池可能包含更多的内存空间；而在应用程序运行得较多时，该缓冲池可能只剩下较少的内存空间</li>
</ol>
<p>数据交付方式：</p>
<ul>
<li>数据交付：这是直接将高速缓存中的数据，传送到请求者进程的内存工作区中</li>
<li>指针交付：只将指向高速缓存中某区域的指针交付给请求者进程</li>
</ul>
<p>提高磁盘I/O速度的方法：</p>
<ol>
<li>提前读(Read-Ahead) </li>
<li>延迟写 </li>
<li>优化物理块的分布 </li>
<li>虚拟盘 </li>
</ol>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2017/01/05/OS-Device Management/">操作系统:设备管理</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">Balian Cheng</a></p>
        <p><span>发布时间:</span>2017-01-05, 17:15:14</p>
        <p><span>最后更新:</span>2017-01-06, 16:17:17</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2017/01/05/OS-Device Management/" title="操作系统:设备管理">http://www.codingbalian.online/2017/01/05/OS-Device Management/</a>
            <span class="copy-path" data-clipboard-text="原文: http://www.codingbalian.online/2017/01/05/OS-Device Management/　　作者: Balian Cheng" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2017/01/06/OS-File Management/">
                    操作系统：文件管理
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2017/01/04/OS-Deadlock/">
                    操作系统：处理机调度与死锁
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1"><span class="toc-number">1.</span> <span class="toc-text">I/O概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1.1"><span class="toc-number">1.1.</span> <span class="toc-text">设备分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1.2"><span class="toc-number">1.2.</span> <span class="toc-text">I/O请求处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1.3"><span class="toc-number">1.3.</span> <span class="toc-text">中断处理程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1.4"><span class="toc-number">1.4.</span> <span class="toc-text">设备驱动程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1.5"><span class="toc-number">1.5.</span> <span class="toc-text">设备独立的软件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1.6"><span class="toc-number">1.6.</span> <span class="toc-text">用户空间的I／O软件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2"><span class="toc-number">2.</span> <span class="toc-text">I/O硬件特点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2.1"><span class="toc-number">2.1.</span> <span class="toc-text">I/O设备组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2.2"><span class="toc-number">2.2.</span> <span class="toc-text">I/O过程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3"><span class="toc-number">3.</span> <span class="toc-text">I/O控制技术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3.1"><span class="toc-number">3.1.</span> <span class="toc-text">程序控制I/O技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3.2"><span class="toc-number">3.2.</span> <span class="toc-text">中断驱动I/O技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3.3"><span class="toc-number">3.3.</span> <span class="toc-text">DMA技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3.4"><span class="toc-number">3.4.</span> <span class="toc-text">通道</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4"><span class="toc-number">4.</span> <span class="toc-text">设备有关技术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4.1"><span class="toc-number">4.1.</span> <span class="toc-text">Spooling（虚拟设备）技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4.2"><span class="toc-number">4.2.</span> <span class="toc-text">中断技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4.3"><span class="toc-number">4.3.</span> <span class="toc-text">典型的中断处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4.4"><span class="toc-number">4.4.</span> <span class="toc-text">通道技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4.5"><span class="toc-number">4.5.</span> <span class="toc-text">DMA技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4.6"><span class="toc-number">4.6.</span> <span class="toc-text">缓冲技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4.7"><span class="toc-number">4.7.</span> <span class="toc-text">总线与USB技术</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5"><span class="toc-number">5.</span> <span class="toc-text">设备分配与设备处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5.1"><span class="toc-number">5.1.</span> <span class="toc-text">设备分配与回收</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5.2"><span class="toc-number">5.2.</span> <span class="toc-text">设备分配策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5.3"><span class="toc-number">5.3.</span> <span class="toc-text">设备处理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6"><span class="toc-number">6.</span> <span class="toc-text">磁盘存储器管理</span></a></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">

    <script>
        yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
    </script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></i></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"操作系统:设备管理　| Balian's Blog　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    
      <div class="duoshuo" id="comments">
    <div id="comment-box" ></div>
    <div class="ds-thread" id="ds-thread" data-thread-key="2017/01/05/OS-Device Management/" data-title="操作系统:设备管理" data-url="http://www.codingbalian.online/2017/01/05/OS-Device Management/"></div>
    <script>
        var duoshuoQuery = {short_name:"balian"};
        var loadComment = function(){
            var d = document, s = d.createElement('script');
            s.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
            s.async = true; s.charset = 'UTF-8';
            (d.head || d.body).appendChild(s);
        }

        
    </script>
    
    <script> loadComment(); </script>

</div>
    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2017/01/06/OS-File Management/" title="上一篇: 操作系统：文件管理">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2017/01/04/OS-Deadlock/" title="下一篇: 操作系统：处理机调度与死锁">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/03/07/JavaScript-API/">H5脚本</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/07/JavaScript-Canvas/">JavaScript-Canvas</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/06/JavaScript-form/">JavaScript表单脚本</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/02/JavaScript-event/">JavaScript-event</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/02/JavaScrpit-DOM2/">JavaScrpit-DOM2</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/28/JavaScript-DOM/">JavaScript的文档对象模型</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/28/JavaScript-BOM/">BOM</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/28/JavaScript-Function/">JavaScript函数</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/27/JavaScript-object/">JavaScript对象</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/26/JavaScript-Note2/">JavaScript:学习笔记2</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/26/jQuery-note/">jQuery学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/21/JavaScript-Note/">JavaScript:学习笔记1</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/06/OS-File Management/">操作系统：文件管理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/05/OS-Device Management/">操作系统:设备管理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/04/OS-Deadlock/">操作系统：处理机调度与死锁</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/29/JSP-Servlet/">JSP中Servlet的应用</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/25/OS-Process/">操作系统：进程管理</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/24/OS-Storage Management/">操作系统:存储管理</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/23/XML-DOM/">XML:DOM</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/22/XML-XSL/">XML:XSL转换</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/22/XML-CSS/">用CSS显示XML</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/21/XML-Schema/">XML Schema</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/20/XML-DTD/">XML:DTD</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/20/XML/">XML：语法基础</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/20/Github-Tutorial/">Github教程</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/20/Adaboost/">Adaboost</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/19/github-pages-Hexo/">github pages + Hexo + 域名绑定</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2017 Balian Cheng
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 6;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>